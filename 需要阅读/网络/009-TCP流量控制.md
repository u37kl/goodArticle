> 重传次数由操作系统决定，当使用tcp发送数据包时，出现丢失时会进行重传，但是并不会无限重传，当达到重传次数上限时，发送方就会发送`reset报文`断开连接，即TCP首部标志位中`RST`设置为1，之后重新建立连接。

> 使用滑动窗口时，接收方每次发送确认包时其中携带着接口方可接收的窗口大小(接收方缓存可用大小)，当接收方告诉发送方可以接受400字节，但是发送方只发送了200字节并且之后没有再发送时，接收方发送了一次确认包后，会等待`一段时间`，再发送一个确认包告诉接收到200字节。

> 重传机制有两种情况
>
> 1. 接收方发送确认包，告诉发送方哪些包丢失。
> 2. 发送方没有接收到确认包，等待一个超时重传时间后，自动发送之前滑动窗口中的数据包(滑动窗口中保存着已发送未得到接收方确认的数据包)，超过一定重传次数或者重传时间，会向服务端发送`reset报文`。

> 为什么选择在传输层将数据拆分，而不是等到网络层再进行数据的分片？
>
> ​		数据要分片是因为数据链路层中每帧的数据大小必须<=1500个字节，因此如果网络层传给链路层的数据包过大时需要切分。选择在传输层的好处在于提高重传的性能。如果在网络层分片，那么如果其中某一片丢失，由于网络层不会保证数据的可靠性传输，接收方网络层将接收到的分片合成一个大的数据包发送个传输层时，由于其中某一片的丢失，导致这个包的所有分片还需要重传一次，说白了就是连坐，一个人犯错整体背锅，将数据拆分放到传输层，哪个人犯错(丢包)，就治那个犯错的人(重传)。